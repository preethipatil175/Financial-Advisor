<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Recommender</title>
</head>

<body>
<div class="container">
    <h2>Loan Recommender</h2>

    <label>Land Type:</label>
    <select id="land_type">
        <option value="Owned">Owned</option>
        <option value="Leased">Leased</option>
    </select>

    <label>Land Size (Acres):</label>
    <input type="number" id="land_size">

    <label>Location:</label>
    <input id="location">

    <label>Crop Type:</label>
    <input id="crop">

    <label>Annual Income:</label>
    <input type="number" id="income">

    <button onclick="submitLoanForm()">Get Recommendation</button>

    <div id="result"></div>
</div>

<script>
function submitLoanForm() {
    const data = {
        LandType: document.getElementById('land_type').value,
        LandSize: document.getElementById('land_size').value,
        Location: document.getElementById('location').value,
        CropType: document.getElementById('crop').value,
        Income: document.getElementById('income').value
    };

    fetch('/loan-recommender', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        if (result.error) {
            document.getElementById('result').innerHTML = "<b>Error:</b> " + result.error;
            return;
        }

        document.getElementById('result').innerHTML =
            `<strong>Recommended Loan:</strong> ${result.recommended_loan}<br>
             <strong>Reason:</strong> ${result.reason}`;
    })
    .catch(() => {
        document.getElementById('result').innerHTML = "Server error.";
    });
}
</script>

</body>
</html>
